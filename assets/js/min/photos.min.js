!function(){"use strict";$(document).ready((function(){const e=$("#image-grid").isotope({itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-item"}});let t=Number(document.querySelector("#image-grid").getAttribute("data-index"))+1;const o=document.querySelector("#image-grid").getAttribute("data-total"),r=ThemeConfig.blog_url,n=document.querySelector(".joe_loading");function i(){const t=document.querySelectorAll(".grid-item"),o=new IntersectionObserver((function(t,o){t.forEach((function(t){if(t.isIntersecting){const r=t.target.querySelector(".lazy-load");r&&(r.src=r.dataset.src,r.classList.remove("lazy-load"),o.unobserve(t.target),r.onload=function(){e.isotope("layout")})}}))}),{threshold:.5});t.forEach((function(e){o.observe(e)}))}i();new IntersectionObserver((n=>{n[0].isIntersecting&&async function(){const n=r+"/photos/page/"+t;t>o?document.querySelector(".joe_loading").remove():fetch(n).then((e=>e.text())).then((r=>{const n=(new DOMParser).parseFromString(r,"text/html").querySelectorAll(".grid-item");n.length>0&&(n.forEach((t=>{e.append(t).isotope("appended",t)})),e.isotope("layout"),i(),t++,t>o&&document.querySelector(".joe_loading").remove())})).catch((e=>{console.error("Error fetching next page data:",e)}))}()}),{threshold:1}).observe(n),$(".joe_photos__filter li").on("click",(function(){const t=$(this).attr("data-sjslink");$(this).addClass("active").siblings().removeClass("active"),e.isotope({filter:function(){const e=$(this).attr("data-sjsel");return"*"===t||e===t}})}))}))}();
